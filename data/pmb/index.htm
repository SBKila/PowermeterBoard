<!DOCTYPE html>
<html>

<head>
	<title>PowerMeter</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="./powermeter.css">
	<link rel="apple-touch-icon" sizes="57x57" href="./apple-icon-57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="./apple-icon-60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="./apple-icon-72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="./apple-icon-76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="./apple-icon-114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="./apple-icon-120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="./apple-icon-144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="./apple-icon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="./apple-icon-180.png">
	<link rel="icon" type="image/png" sizes="192x192" href="./android-icon-192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="./favicon-32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="./favicon-96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./favicon-16.png">
	<link rel="manifest" href="./manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="./ms-icon-144.png">
	<meta name="theme-color" content="#ffffff">
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>

<body>

	<div data-role="page" id="landing">

		<div data-role="header">
			<h1>Power Meter Overview</h1>
		</div><!-- /header -->

		<div role="main" class="ui-content">
			<div data-role="header">
				<h1>Home assistant</h1>
			</div>
			<div class="ui-nodisc-icon">
				<p>Device name:`NODENAME`</p>
			</div>
			<div data-role="header">
				<h1>MQTT server</h1>
				<a data-icon="gear" class="ui-btn-right" data-iconpos="notext" href="#setMQTT"></a>
			</div>
			<div class="ui-nodisc-icon">
				<p>MQTT Server:mqtt://`MQTTDOMAIN`:`MQTTPORT`</p>
				<p>Login:`MQTTLOGIN`</p>
				<p>Password:`MQTTPWD`</p>
				<p>Status:<span id="HA_status">`MQTTCONNECTIONSTATUS`</span></p>
			</div>
		</div>

		<div role="main" class="ui-content">
			<div data-role="header">
				<h1>Powereters</h1>
				<a href="#addPM" data-icon="plus" class="ui-btn-right" data-iconpos="notext">add</a>
			</div>
			<div data-role="collapsible-set" data-theme="c" data-content-theme="d" id='powermeterslist'>
			</div>
		</div>
		<div role="main" class="ui-content">
			<div class="ui-grid-a ui-responsive">
				<div class="ui-block-a"><input id="btn-reload" type="button" data-icon="recycle" value="Reload" data-iconpos="bottom"></div>
				<div class="ui-block-b"><input id="btn-upload" type="button" data-icon="action" value="Upload" data-iconpos="bottom" disabled></div>

			</div>

		</div>
		<div id="footer" data-role="footer">
			<img class="logo" src="./KPLogo.svg">
		</div><!-- /footer -->
	</div><!-- /page -->
	<div data-role="page" id="setMQTT">
		<form id="setMQTTForm">
			<div class="ui-field-contain">
				<label for="mqtt_url">Url:</label>
				<input type="text" name="mqtt_url" value="" id="mqtt_url" value="%MQTTURL%">
			</div>
			<div class="ui-field-contain">
				<label for="mqtt_port">Port:</label>
				<input type="number" name="mqtt_port" value="" id="mqtt_port" value="%MQTTPORT%">
			</div>
			<div class="ui-field-contain">
				<label for="mqtt_login">Login:</label>
				<input type="text" name="mqtt_login" value="" id="mqtt_login" value="%MQTTLOGIN%">
			</div>
			<div class="ui-field-contain">
				<label for="mqtt_pwd">Login:</label>
				<input type="text" name="mqtt_pwd" value="" id="mqtt_pwd" value="%MQTTPWD%">
			</div>
			<div data-role="navbar" data-iconpos="bottom">
				<ul>
					<li><a href="#landing" data-icon="delete">Cancel</a></li>
					<li><button id="mqttssubmit" type="submit" data-icon="action" class="ui-btn-active">Save</button>
					</li>
				</ul>
			</div>
		</form>
	</div>
	<div data-role="page" id="addPM">
		<div data-role="header">
			<h1>Add new Power Meter</h1>
		</div><!-- /header -->
		<div role="main" class="ui-content">
			<form id="createPMForm">
				<label for="createPMForm_dIO">Reference:</label>
				<select name="dIO" id="createPMForm_dIO" data-native-menu="false">
					<option value="">Choices connector:</option>
					<option value="0">PowerMeter 1</option>
					<option value="4">PowerMeter 2</option>
					<option value="16">PowerMeter 3</option>
					<option value="14">PowerMeter 4</option>
					<option value="12">PowerMeter 5</option>
					<option value="13">PowerMeter 6</option>
					<option value="15">PowerMeter 7</option>
					<option value="3">PowerMeter 8</option>
					<option value="1">PowerMeter 9</option>
					<option value="2">PowerMeter 10</option>
				</select>
				<label for="createPMForm_name">Name:</label>
				<input type="text" name="name" value="" id="createPMForm_name">
				<label for="createPMForm_nbTickByKW">Impuls by kW:</label>
				<input type="number" name="nbTickByKW" value="" id="createPMForm_nbTickByKW">
				
				<label for="createPMForm_voltage">Nominal voltage:</label>
				<select name="voltage" id="createPMForm_voltage" data-native-menu="false">
					<option value="">Power suply voltage:</option>
					<option value="230">230</option>
					<option value="220">220</option>
					<option value="240">240</option>
					<option value="110">110</option>
					<option value="120">120</option>
				</select>
				<label for="createPMForm_maxAmp">Max amp:</label>
				<input name="maxAmp" pattern="[0-9]*" value="" id="createPMForm_maxAmp">
				<label for="createPMForm_cumulative">Current value:</label>
				<input name="cumulative" pattern="[0-9]*" value="0" id="createPMForm_cumulative">
				<input data-role="submit" type="submit" value="Add" class="ui-btn ui-corner-all">
				<a href="#" class="ui-btn ui-corner-all" data-rel="back">Cancel</a>
			</form>
		</div>
		<div id="footer" data-role="footer">
			<embed class="logo" src="./KPLogo.svg">
		</div><!-- /footer -->
	</div>
	<div data-role="page" id="editPM">
		<div data-role="header">
			<h1>Edit Power Meter</h1>
		</div><!-- /header -->
		<div role="main" class="ui-content">
			<form id="editPMForm">
				<label for="editpm_ref">Reference:</label>
				<input readonly type="text" name="dIO" value="" id="editpm_ref">
				<label for="editpm_name">Name:</label>
				<input readonly type="text" name="name" value="" id="editpm_name">
				<label for="editpm_nbtick">Impuls by kW:</label>
				<input type number name="nbTickByKW" id="editpm_nbtick" value="">
				<label for="editpm_voltage">Nominal voltage:</label>
				<select name="voltage" id="editpm_voltage" data-native-menu="false">
					<option value="">Power suply voltage:</option>
					<option value="230">230</option>
					<option value="220">220</option>
					<option value="240">240</option>
					<option value="110">110</option>
					<option value="120">120</option>
				</select>
				<label for="editpm_maxamp">Max amp:</label>
				<input name="maxAmp" id="editpm_maxamp" pattern="[0-9]*" value="">
				<label for="editpm_value">Current value:</label>
				<input name="cumulative" id="editpm_value" pattern="[0-9]*" value="0">
				<input data-role="submit" type="submit" value="Update" class="ui-btn ui-corner-all">
				<a href="#" class="ui-btn ui-corner-all" data-rel="back">Cancel</a>
			</form>
		</div>
		<div id="footer" data-role="footer">
			<embed class="logo" src="./KPLogo.svg">
		</div><!-- /footer -->
	</div>
	<script type="text/javascript" src="./index.js"></script>
</body>

</html>